
<template name="facilityPage">
    <table class="table table-bordered table-striped table-hover">
        <thead>
            <tr>
                <th>设备编号</th>
                <th>类型</th>
                <th>所在地</th>
                <th>创建时间</th>
                <th>累计捐赠量(kg)</th>
                <th>当前捐赠量(kg)</th>
                <th>状态</th>
            </tr>
        </thead>
        <tbody>
            {{#each facilities}}
                {{> facilityRow}}
            {{/each}}
        </tbody>
    </table>
    <button class="btn btn-primary add">添加设备</button>
    <button class="btn btn-warning modify {{#unless hasSelectedRow}}disabled{{/unless}}">修改设备</button>
    <button class="btn btn-danger remove {{#unless hasSelectedRow}}disabled{{/unless}}">删除设备</button>
</template>

<template name="facilityRow">
    <tr class="facrow {{#if isSelected}}selected{{/if}}">
        <td>{{_id}}</td>
        <td>{{getTypeName type}}</td>
        <td>{{addr}}</td>
        <td>{{created_at}}</td>
        <td>{{weight_acc}}</td>
        <td>{{weight_now}}</td>
        <td>{{status}}</td>
    </tr>
</template>

<template name="facilityForm">
    {{#with curModel}}
    <form class="form">
        <div class="panel panel-default">
            <div class="panel-heading">
                <a href="/admin/facility">设备管理</a> / 添加设备
            </div>
            <div class="panel-body">
                <div class="form-group col-lg-12">
                    <label>类型:</label>
                    <select class="form-control" id="fac_type">
                        {{#each types}}
                            <option value="{{type}}" selected="{{#if isCurType type}}selected{{/if}}">{{name}}</option>
                        {{/each}}
                    </select>
                </div>
                <div class="form-group col-lg-12">
                    <label>所在地:</label>
                    <input type="text" class="form-control" id="fac_addr" value="{{curModel.addr}}">
                </div>
            </div>

            <div class="alert-container">
                {{#if errorMessage}}
                    <div class="alert">
                        <span><i class="icon-sign"></i>{{errorMessage}}</span>
                    </div>
                {{/if}}
            </div>
            <div class="panel-footer">
                <button type="submit" class="btn btn-primary">
                    {{#if createMode}}添加{{else}}修改{{/if}}
                </button>
            </div>
        </div>
    </form>
    {{/with}}
</template>